# Roadmap（迭代路线）

## Phase 0：项目骨架 ✅

- [x] 项目骨架与设计文档
- [x] 确认技术选型与需求

## Phase 1：MVP（单管理员 + Web 面板） ✅

### 1.1 基础设施 ✅
- [x] 配置加载（Bot Token、Webhook URL、管理员白名单、DB 路径）
- [x] 数据库初始化（SQLite + SQLAlchemy）
- [x] FastAPI 应用骨架
- [x] aiogram Bot 初始化（支持 Polling 和 Webhook 双模式）
- [x] APScheduler 集成

### 1.2 Bot 功能 ✅
- [x] 频道入群/退群事件监听（自动记录频道）
- [x] 管理员私聊接收素材消息
- [x] 置顶提示消息清理（发布时自动删除服务消息）

### 1.3 Web API（后端） ✅
- [x] 认证中间件（简单 token）
- [x] 频道管理 CRUD
- [x] 分组管理 CRUD
- [x] 槽位管理 CRUD（支持可配置 N 个）
- [x] 素材管理 CRUD
- [x] 手动触发发布/删除/清除置顶
- [x] 系统设置 API（Bot Token、管理员 ID、密码修改）

### 1.4 调度执行 ✅
- [x] 发布任务：删除旧消息 → copyMessage → pin → 更新 placement
- [x] 随机槽位分配（含去重：同频道不重复）
- [x] 删除任务：按策略执行（none/after_seconds/cron）
- [x] 任务暂停/继续
- [x] 槽位热加载（修改后自动同步调度器）

### 1.5 Web 前端 ✅
- [x] Vue 3 + Element Plus 项目搭建
- [x] 仪表盘页面（统计数据 + 快速操作 + 使用说明）
- [x] 频道管理页面
- [x] 分组管理页面
- [x] 槽位管理页面（含名称字段）
- [x] 素材管理页面（含名称字段 + 按钮编辑器）
- [x] 系统设置页面（Bot Token + 管理员 ID + 密码修改）

### 1.6 可观测性 ✅
- [x] 操作日志记录（发布/删除/错误）
- [x] /health 接口（调度器状态、统计信息）
- [x] Bot 运行状态检测

### 验收标准（MVP） ✅

- [x] 任意 1 个分组内 ≥5 个频道、每频道可配置 N 个槽位（固定+随机）可稳定轮换
- [x] 每个槽位独立暂停/继续/清除
- [x] 同一频道不会同时出现相同广告
- [x] 轮换时不会残留旧广告消息
- [x] Web 面板可完成所有管理操作
- [x] 置顶服务消息自动清理

## Phase 2：优化与扩展（部分完成）

- [ ] 支持更多删除策略（如按发布次数删除）
- [x] 素材库管理（未绑定槽位的素材池）
- [ ] 批量导入频道/素材
- [ ] 操作日志导出/日志查看页面
- [x] Docker 部署支持（docker-compose 一键部署）
- [x] 槽位/素材命名功能（便于识别用途）

## Phase 3：商业化（暂不实施）

> 以下功能暂不开发，仅作为后续扩展参考。

- [ ] 多用户/租户支持
- [ ] 套餐与配额
- [ ] 易支付接入
- [ ] 审核待办系统
- [ ] 用户自助管理面板
