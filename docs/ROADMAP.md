# Roadmap（迭代路线）

## Phase 0：项目骨架 ✅

- [x] 项目骨架与设计文档
- [x] 确认技术选型与需求

## Phase 1：MVP（单管理员 + Web 面板）

### 1.1 基础设施
- [ ] 配置加载（Bot Token、Webhook URL、管理员白名单、DB 路径）
- [ ] 数据库初始化（SQLite + SQLAlchemy）
- [ ] FastAPI 应用骨架
- [ ] aiogram Bot 初始化（Webhook 模式）
- [ ] APScheduler 集成

### 1.2 Bot 功能
- [ ] 频道入群/退群事件监听（自动记录频道）
- [ ] 管理员私聊接收素材消息
- [ ] 置顶提示消息清理（监听 service message）

### 1.3 Web API（后端）
- [ ] 认证中间件（简单 token）
- [ ] 频道管理 CRUD
- [ ] 分组管理 CRUD
- [ ] 槽位管理 CRUD（支持可配置 N 个）
- [ ] 素材管理 CRUD
- [ ] 手动触发发布/删除/清除置顶

### 1.4 调度执行
- [ ] 发布任务：删除旧消息 → copyMessage → pin → 更新 placement
- [ ] 随机槽位分配（含去重：同频道不重复）
- [ ] 删除任务：按策略执行（none/after_seconds/cron）
- [ ] 任务暂停/继续

### 1.5 Web 前端
- [ ] Vue 3 + Element Plus 项目搭建
- [ ] 仪表盘页面
- [ ] 频道管理页面
- [ ] 分组管理页面
- [ ] 槽位管理页面
- [ ] 素材管理页面
- [ ] 日志查看页面

### 1.6 可观测性
- [ ] 操作日志记录
- [ ] /health 接口（调度器状态、统计信息）

### 验收标准（MVP）

- 任意 1 个分组内 ≥5 个频道、每频道可配置 N 个槽位（固定+随机）可稳定轮换
- 每个槽位独立暂停/继续/清除
- 同一频道不会同时出现相同广告
- 轮换时不会残留旧广告消息
- Web 面板可完成所有管理操作

## Phase 2：优化与扩展（按需）

- [ ] 支持更多删除策略（如按发布次数删除）
- [ ] 素材库管理（未绑定槽位的素材池）
- [ ] 批量导入频道/素材
- [ ] 操作日志导出
- [ ] Docker 部署支持

## Phase 3：商业化（暂不实施）

> 以下功能暂不开发，仅作为后续扩展参考。

- [ ] 多用户/租户支持
- [ ] 套餐与配额
- [ ] 易支付接入
- [ ] 审核待办系统
- [ ] 用户自助管理面板
